<script>
  const waterHistory = JSON.parse('<%- JSON.stringify(waterHistory || {}) %>');
  const electricHistory = JSON.parse('<%- JSON.stringify(electricHistory || {}) %>');

  // Debug logs ƒë·ªÉ ki·ªÉm tra d·ªØ li·ªáu
  console.log('üîç Debug - Raw data from server:');
  console.log('üíß waterHistory:', waterHistory);
  console.log('‚ö° electricHistory:', electricHistory);
  console.log('üìä Server date ranges:');
  console.log('‚ö° Electric range: <%= fromElectric %> to <%= toElectric %>');
  console.log('üíß Water range: <%= fromWater %> to <%= toWater %>');

  // H√†m t·∫°o 9 th√°ng g·∫ßn nh·∫•t
  function getLast9Months() {
    const months = [];
    const today = new Date();
    for (let i = 8; i >= 0; i--) {
      const d = new Date(today);
      d.setMonth(d.getMonth() - i);
      months.push({
        month: d.getMonth() + 1,
        year: d.getFullYear(),
        monthYear: `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}`
      });
    }
    return months;
  }

  // Set Vietnamese locale for browser
  document.documentElement.lang = 'vi';
  
  // Set Vietnamese locale for dayjs FIRST
  dayjs.locale('vi');
  
  // Configure Ant Design locale
  const { ConfigProvider, DatePicker } = antd;
  const { RangePicker } = DatePicker;
  const { createElement: h } = React;
  const { createRoot } = ReactDOM;
  
  // Vietnamese locale for Ant Design
  const vietnameseLocale = {
    "locale": "vi_VN",
    "DatePicker": {
      "lang": {
        "placeholder": "Ch·ªçn th·ªùi ƒëi·ªÉm",
        "rangePlaceholder": ["T·ª´ th√°ng", "ƒê·∫øn th√°ng"],
        "locale": "vi_VN",
        "today": "H√¥m nay",
        "now": "B√¢y gi·ªù",
        "backToToday": "V·ªÅ h√¥m nay",
        "ok": "Ok",
        "clear": "X√≥a",
        "month": "Th√°ng",
        "year": "NƒÉm",
        "monthSelect": "Ch·ªçn th√°ng",
        "yearSelect": "Ch·ªçn nƒÉm",
        "yearFormat": "YYYY",
        "dateFormat": "D/M/YYYY",
        "dayFormat": "D",
        "monthBeforeYear": true,
        "previousMonth": "Th√°ng tr∆∞·ªõc (PageUp)",
        "nextMonth": "Th√°ng sau (PageDown)",
        "previousYear": "NƒÉm tr∆∞·ªõc (Control + left)",
        "nextYear": "NƒÉm sau (Control + right)",
        "shortWeekDays": ["CN", "T2", "T3", "T4", "T5", "T6", "T7"],
        "shortMonths": ["Th1", "Th2", "Th3", "Th4", "Th5", "Th6", "Th7", "Th8", "Th9", "Th10", "Th11", "Th12"]
      },
      "timePickerLocale": {
        "placeholder": "Ch·ªçn th·ªùi gian"
      }
    }
  };

  // Global picker roots storage
  const pickerRoots = {};
</script> 