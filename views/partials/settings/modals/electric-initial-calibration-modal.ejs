<!-- Modal Hiệu chuẩn ban đầu điện -->
<div class="modal fade" id="electricInitialCalibrationModal" tabindex="-1">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          <i class="fas fa-cog"></i> Hiệu chuẩn ban đầu - Cảm biến điện
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="alert alert-info">
          <i class="fas fa-info-circle"></i>
          <strong>Hướng dẫn:</strong>
          <ul class="mb-0 mt-2">
            <li>Nhập giá trị hiển thị trên cảm biến điện</li>
            <li>Nhập giá trị thực tế từ đồng hồ điện cơ</li>
            <li>Hệ thống sẽ tính offset với calibrationFactor = 1</li>
            <li>Công thức: offset = giá trị đồng hồ - giá trị cảm biến</li>
          </ul>
        </div>

        <form id="electricInitialCalibrationForm">
          <div class="form-group mb-3">
            <label for="electricInitialSensorValue" class="form-label">
              <strong>Giá trị cảm biến điện:</strong>
            </label>
            <div class="input-group">
              <input type="number" class="form-control" id="electricInitialSensorValue" 
                     step="0.01" min="0" placeholder="0.0000" required>
              <span class="input-group-text">kWh</span>
            </div>
            <div class="form-text">Giá trị hiển thị trên cảm biến điện</div>
          </div>

          <div class="form-group mb-3">
            <label for="electricInitialMeterValue" class="form-label">
              <strong>Giá trị đồng hồ điện:</strong>
            </label>
            <div class="input-group">
              <input type="number" class="form-control" id="electricInitialMeterValue" 
                     step="0.01" min="0" placeholder="0.0000" required>
              <span class="input-group-text">kWh</span>
            </div>
            <div class="form-text">Giá trị thực tế từ đồng hồ điện cơ</div>
          </div>

          <!-- Preview kết quả -->
          <div id="electricInitialPreview" class="calibration-result" style="display: none;">
            <h6><i class="fas fa-calculator"></i> Kết quả tính toán:</h6>
            <div class="result-item">
              <span class="result-label">Offset:</span>
              <span class="result-value" id="electricInitialOffsetPreview">0.0000</span>
            </div>
            <div class="result-item">
              <span class="result-label">Calibration Factor:</span>
              <span class="result-value">1.0000</span>
            </div>
            <div class="result-item">
              <span class="result-label">Công thức:</span>
              <span class="result-value">Offset = Giá trị đồng hồ - Giá trị cảm biến</span>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          <i class="fas fa-times"></i> Hủy
        </button>
        <button type="button" class="btn btn-primary" onclick="submitElectricInitialCalibration()">
          <i class="fas fa-save"></i> Lưu hiệu chuẩn ban đầu
        </button>
      </div>
    </div>
  </div>
</div>

<style>
.calibration-result {
  background: #f8f9fa;
  border: 1px solid #dee2e6;
  border-radius: 0.375rem;
  padding: 1rem;
  margin-top: 1rem;
}

.result-item {
  display: flex;
  justify-content: space-between;
  margin-bottom: 0.5rem;
}

.result-item:last-child {
  margin-bottom: 0;
}

.result-label {
  font-weight: 500;
  color: #495057;
}

.result-value {
  font-weight: 600;
  color: #007bff;
}
</style> 