<script>
// ==================== TEMP GATEWAY DEBUG ====================
// Äá»ƒ debug gateway issue trÃªn server Linux

window.debugGatewayInfo = async function() {
    try {
        console.log('ðŸ” === GATEWAY DEBUG INFO START ===');
        
        // Test debug endpoint
        const response = await fetch('/api/debug/gateway-info', {
            method: 'GET',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            }
        });

        console.log('ðŸ“¡ Debug API Response status:', response.status);
        console.log('ðŸ“¡ Debug API Response ok:', response.ok);

        if (!response.ok) {
            const errorText = await response.text();
            console.error('âŒ Debug API Error:', errorText);
            return;
        }

        const data = await response.json();
        console.log('ðŸ“¡ Gateway Debug Info:', JSON.stringify(data, null, 2));
        
        if (data.success) {
            console.log(`ðŸ¢ Building ID: ${data.buildingId}`);
            console.log(`ðŸŒ Gateway ID: ${data.gatewayId || 'NOT SET'}`);
            console.log(`âœ… Has Gateway ID: ${data.hasGatewayId}`);
            console.log(`ðŸ‘¤ Session Info:`, data.sessionInfo);
            
            if (!data.hasGatewayId) {
                console.warn('âš ï¸ NO GATEWAY ID CONFIGURED - This is why you get 404!');
                console.log('ðŸ’¡ Solution: Go to Dashboard and add a Gateway ID first');
            } else {
                console.log('âœ… Gateway ID exists, issue might be with external API');
            }
        }
        
        console.log('ðŸ” === GATEWAY DEBUG INFO END ===');
        
    } catch (error) {
        console.error('âŒ Gateway debug error:', error);
    }
};

// Auto-run debug
setTimeout(() => {
    console.log('ðŸš€ Running gateway debug info...');
    window.debugGatewayInfo();
}, 1000);

console.log('ðŸ”§ Gateway debug loaded. Call window.debugGatewayInfo() manually if needed');
</script> 